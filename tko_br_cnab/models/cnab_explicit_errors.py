# -*- coding: utf-8 -*-
# © 2017 TKO <http://tko.tko-br.com>
# License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).


# data is taken from http://download.itau.com.br/bankline/cobranca_cnab240.pdf

# CÓDIGO DE OCORRÊNCIA (ARQUIVO RETORNO)
# page 20
# TABELA 2 – Alteração de dados rejeitada (código da ocorrência = 17 na Posição 16 a 17)



service_codigo_message = {
2 : "ENTRADA CONFIRMADA",
3 : "ENTRADA REJEITADA (NOTA 23 - TABELA 1)",
4 : "ALTERAÇÃO DE DADOS – NOVA ENTRADA OU ALTERAÇÃO/EXCLUSÃOADOS ACATADA",
5 : "ALTERAÇÃO DE DADOS – BAIXA",
6 : "LIQUIDAÇÃO NORMAL",
8 : "LIQUIDAÇÃO EM CARTÓRIO",
9 : "BAIXA SIMPLES",
10 : "BAIXA POR TER SIDO LIQUIDADO",
11 : "EM SER (SÓ NO RETORNO MENSAL)",
12 : "ABATIMENTO CONCEDIDO",
13 : "ABATIMENTO CANCELADO",
14 : "VENCIMENTO ALTERADO",
15 : "BAIXAS REJEITADAS (NOTA 23 - TABELA 4)",
16 : "INSTRUÇÕES REJEITADAS (NOTA 23 – TABELA 3)",
17 : "ALTERAÇÃO/EXCLUSÃO DE DADOS REJEITADA (NOTA 23 - TABELA 2)",
18 : "COBRANÇA CONTRATUAL – INSTRUÇÕES/ALTERAÇÕES REJEITADAS/PENDENTES (NOTA 23 - TABELA 5)",
19 : "CONFIRMAÇÃO RECEBIMENTO DE INSTRUÇÃO DE PROTESTO",
20 : "CONFIRMAÇÃO RECEBIMENTO DE INSTRUÇÃO DE SUSTAÇÃO DE PROTESTO /TARIFA",
21 : "CONFIRMAÇÃO RECEBIMENTO DE INSTRUÇÃO DE NÃO PROTESTAR",
23 : "PROTESTO ENVIADO A CARTÓRIO/TARIFA",
24 : "INSTRUÇÃO DE PROTESTO SUSTADA (NOTA 23 - TABELA 7)",
25 : "ALEGAÇÕES DO PAGADOR (NOTA 23 - TABELA 6)",
26 : "TARIFA DE AVISO DE COBRANÇA",
27 : "TARIFA DE EXTRATO POSIÇÃO (B40X)",
28 : "TARIFA DE RELAÇÃO DAS LIQUIDAÇÕES",
29 : "TARIFA DE MANUTENÇÃO DE TÍTULOS VENCIDOS",
30 : "DÉBITO MENSAL DE TARIFAS (PARA ENTRADAS E BAIXAS)",
32 : "BAIXA POR TER SIDO PROTESTADO",
33 : "CUSTAS DE PROTESTO",
34 : "CUSTAS DE SUSTAÇÃO",
35 : "CUSTAS DE CARTÓRIO DISTRIBUIDOR",
36 : "CUSTAS DE EDITAL",
37 : "TARIFA DE EMISSÃO DE BOLETO/TARIFA DE ENVIO DE DUPLICATA",
38 : "TARIFA DE INSTRUÇÃO",
39 : "TARIFA DE OCORRÊNCIAS",
40 : "TARIFA MENSAL DE EMISSÃO DE BOLETO/TARIFA MENSAL DE ENVIO DE DUPLICATA",
41 : "DÉBITO MENSAL DE TARIFAS – EXTRATO DE POSIÇÃO (B4EP/B4OX)",
42 : "DÉBITO MENSAL DE TARIFAS – OUTRAS INSTRUÇÕES",
43 : "DÉBITO MENSAL DE TARIFAS – MANUTENÇÃO DE TÍTULOS VENCIDOS",
44 : "DÉBITO MENSAL DE TARIFAS – OUTRAS OCORRÊNCIAS",
45 : "DÉBITO MENSAL DE TARIFAS – PROTESTO",
46 : "DÉBITO MENSAL DE TARIFAS – SUSTAÇÃO DE PROTESTO",
47 : "BAIXA COM TRANSFERÊNCIA PARA DESCONTO",
48 : "CUSTAS DE SUSTAÇÃO JUDICIAL",
51 : "TARIFA MENSAL REFERENTE A ENTRADAS BANCOS CORRESPONDENTES NA CARTEIRA",
52 : "TARIFA MENSAL BAIXAS NA CARTEIRA",
53 : "TARIFA MENSAL BAIXAS EM BANCOS CORRESPONDENTES NA CARTEIRA",
54 : "TARIFA MENSAL DE LIQUIDAÇÕES NA CARTEIRA",
55 : "TARIFA MENSAL DE LIQUIDAÇÕES EM BANCOS CORRESPONDENTES NA CARTEIRA",
56 : "CUSTAS DE IRREGULARIDADE",
57 : "INSTRUÇÃO CANCELADA (NOTA 23 – TABELA 8)",
60 : "ENTRADA REJEITADA CARNÊ (NOTA 20 – TABELA 1)",
61 : "TARIFA EMISSÃO AVISO DE MOVIMENTAÇÃO DE TÍTULOS (2154)",
62 : "DÉBITO MENSAL DE TARIFA – AVISO DE MOVIMENTAÇÃO DE TÍTULOS (2154)",
63 : "TÍTULO SUSTADO JUDICIALMENTE",
74 : "INSTRUÇÃO DE NEGATIVAÇÃO EXPRESSA REJEITADA (NOTA 25 – TABELA 3)",
75 : "CONFIRMA O RECEBIMENTO DE INSTRUÇÃO DE ENTRADA EM NEGATIVAÇÃO EXPRESSA",
77 : "CONFIRMA O RECEBIMENTO DE INSTRUÇÃO DE EXCLUSÃO DE ENTRADA EM NEGATIVAÇÃO EXPRESSA",
78 : "CONFIRMA O RECEBIMENTO DE INSTRUÇÃO DE CANCELAMENTO DA NEGATIVAÇÃO EXPRESSA",
79 : "NEGATIVAÇÃO EXPRESSA INFORMACIONAL (NOTA 25 – TABELA 12)",
80 : "CONFIRMAÇÃO DE ENTRADA EM NEGATIVAÇÃO EXPRESSA – TARIFA",
82 : "CONFIRMAÇÃO O CANCELAMENTO DE NEGATIVAÇÃO EXPRESSA - TARIFA",
83 : "CONFIRMAÇÃO DA EXCLUSÃO/CANCELAMENTO DA NEGATIVAÇÃO EXPRESSA POR LIQUIDAÇÃO - TARIFA",
85 : "TARIFA POR BOLETO (ATÉ 03 ENVIOS) COBRANÇA ATIVA ELETRÔNICA",
86 : "TARIFA EMAIL COBRANÇA ATIVA ELETRÔNICA",
87 : "TARIFA SMS COBRANÇA ATIVA ELETRÔNICA",
88 : "TARIFA MENSAL POR BOLETO (ATÉ 03 ENVIOS) COBRANÇA ATIVA ELETRÔNICA",
89 : "TARIFA MENSAL EMAIL COBRANÇA ATIVA ELETRÔNICA",
90 : "TARIFA MENSAL SMS COBRANÇA ATIVA ELETRÔNICA",
91 : "TARIFA MENSAL DE EXCLUSÃO DE ENTRADA EM NEGATIVAÇÃO EXPRESSA",
92 : "TARIFA MENSAL DE CANCELAMENTO DE NEGATIVAÇÃO EXPRESSA",
93 : "TARIFA MENSAL DE EXCLUSÃO/CANCELAMENTO DE NEGATIVAÇÃO EXPRESSA POR LIQUIDAÇÃO",
94 : "CONFIRMA RECEBIMENTO DE INSTRUÇÃO DE NÃO NEGATIVAR"
}

# TABELA 1 - Entradas Rejeitadas (código da ocorrência = 03 na Posição 16 a 17)
table_1 = {3 : "AG. COBRADORA NÃO FOI POSSÍVEL ATRIBUIR A AGÊNCIA PELO CEP OU CEP INVÁLIDO",
4 : "ESTADO SIGLA DO ESTADO INVÁLIDA",
5 : "DATA VENCIMENTO PRAZO DA OPERAÇÃO MENOR QUE PRAZO MÍNIMO OU MAIOR QUE O MÁXIMO",
8 : "NOME DO PAGADOR NÃO INFORMADO OU DESLOCADO",
9 : "AGÊNCIA/CONTA AGÊNCIA ENCERRADA",
10 : "LOGRADOURO NÃO INFORMADO OU DESLOCADO",
11 : "CEP CEP NÃO NUMÉRICO",
12 : "SACADOR AVALISTA NOME NÃO INFORMADO OU DESLOCADO (BANCOS CORRESPONDENTES)",
13 : "ESTADO/CEP CEP INCOMPATÍVEL COM A SIGLA DO ESTADO",
14 : "NOSSO NÚMERO NOSSO NÚMERO JÁ REGISTRADO NO CADASTRO DO BANCO OU FORA DA FAIXA",
15 : "NOSSO NÚMERO NOSSO NÚMERO EM DUPLICIDADE NO MESMO MOVIMENTO",
18 : "DATA DE ENTRADA DATA DE ENTRADA INVÁLIDA PARA OPERAR COM ESTA CARTEIRA",
19 : "OCORRÊNCIA OCORRÊNCIA INVÁLIDA",
21 : "AG. COBRADORA CARTEIRA NÃO ACEITA DEPOSITÁRIA CORRESPONDENTE",
22 : "CARTEIRA CARTEIRA NÃO PERMITIDA (NECESSÁRIO CADASTRAR FAIXA LIVRE)",
27 : "CNPJ INAPTO CNPJ DO BENEFICIÁRIO INAPTO",
29 : "CÓDIGO EMPRESA CATEGORIA DA CONTA INVÁLIDA",
31 : "AGÊNCIA/CONTA CONTA NÃO TEM PERMISSÃO PARA PROTESTAR (CONTATE SEU GERENTE)",
35 : "VALOR DO IOF IOF MAIOR QUE 5%",
36 : "QTDADE DE MOEDA QUANTIDADE DE MOEDA INCOMPATÍVEL COM VALOR DO TÍTULO",
37 : "CNPJ/CPF DO PAGADOR NÃO NUMÉRICO OU IGUAL A ZEROS",
42 : "NOSSO NÚMERO NOSSO NÚMERO FORA DE FAIXA",
52 : "AG. COBRADORA EMPRESA NÃO ACEITA BANCO CORRESPONDENTE",
53 : "AG. COBRADORA EMPRESA NÃO ACEITA BANCO CORRESPONDENTE - COBRANÇA MENSAGEM",
54 : "DATA DE VENCTO BANCO CORRESPONDENTE – TÍTULO COM VENCIMENTO INFERIOR A 15 DIAS",
55 : "DEP./BCO. CORRESP. CEP NÃO PERTENCE A DEPOSITÁRIA INFORMADA",
56 : "DT. VCTO./BCO. CORESP. VENCTO. SUPERIOR A 180 DIAS DA DATA DE ENTRADA",
57 : "DATA DE VENCIMENTO CEP SÓ DEPOSITÁRIA BCO. DO BRASIL COM VENCTO. INFERIOR A 8 DIAS",
60 : "ABATIMENTO VALOR DO ABATIMENTO INVÁLIDO",
61 : "JUROS DE MORA JUROS DE MORA MAIOR QUE O PERMITIDO",
62 : "DESCONTO VALOR DO DESCONTO MAIOR QUE O VALOR DO TÍTULO",
63 : "DESCONTO DE ANTECIPAÇÃO VALOR DA IMPORTÂNCIA POR DIA DE DESCONTO (IDD) NÃO PERMITI",
64 : "EMISSÃO DO TÍTULO DATA DE EMISSÃO DO TÍTULO INVÁLIDA (VENDOR)",
65 : "TAXA FINANCTO. TAXA INVÁLIDA (VENDOR)",
66 : "DATA DE VENCTO.. INVALIDA/FORA DE PRAZO DE OPERAÇÃO (MÍNIMO OU MÁXIMO)",
67 : "VALOR/QTIDADE. VALOR DO TÍTULO/QUANTIDADE DE MOEDA INVÁLIDO",
68 : "CARTEIRA CARTEIRA INVÁLIDA OU NÃO CADASTRADA NO INTERCÂMBIO DA COBRANÇA",
98 : "FLASH INVÁLIDO REGISTRO MENSAGEM SEM FLASH CADASTRADO OU FLASH INFORMADO DIFERENTE DO",
99 : "FLASH INVÁLIDO CONTA DE COBRANÇA COM FLASH CADASTRADO E SEM REGISTRO DE MENSAGEM"
}

# Servico Codigo error message
# page 23
# TABELA 2 – Alteração de dados rejeitada (código da ocorrência = 17 na Posição 16 a 17)

table_2 = {
2: "AGÊNCIA COBRADORA INVÁLIDA OU COM O MESMO CONTEÚDO",
4: "SIGLA DO ESTADO INVÁLIDA",
5: "DATA DE VENCIMENTO INVÁLIDA OU COM O MESMO CONTEÚDO",
6: "VALOR DO TÍTULO COM OUTRA ALTERAÇÃO SIMULTÂNEA",
8: "NOME DO PAGADOR COM O MESMO CONTEÚDO",
11: "CEP INVÁLIDO",
12: "NÚMERO INSCRIÇÃO INVÁLIDO DO SACADOR AVALISTA",
13: "SEU NÚMERO COM O MESMO CONTEÚDO",
21: "AGÊNCIA COBRADORA NÃO CONSTA NO CADASTRO DE DEPOSITÁRIA OU EM ENCERRAMENTO",
42: "ALTERAÇÃO INVÁLIDA PARA TÍTULO VENCIDO",
43: "ALTERAÇÃO BLOQUEADA – VENCIMENTO JÁ ALTERADO",
53: "INSTRUÇÃO COM O MESMO CONTEÚDO",
54: "DATA VENCIMENTO PARA BANCOS CORRESPONDENTES INFERIOR AO ACEITO PELO BANCO",
55: "ALTERAÇÕES IGUAIS PARA O MESMO CONTROLE (AGÊNCIA/CONTA/CARTEIRA/NOSSO NÚMERO)",
60: "VALOR DE IOF – ALTERAÇÃO NÃO PERMITIDA PARA CARTEIRAS DE N.S. – MOEDA VARIÁVEL",
61: "TÍTULO JÁ BAIXADO OU LIQUIDADO OU NÃO EXISTE TÍTULO CORRESPONDENTE NO SISTEMA",
66: "ALTERAÇÃO NÃO PERMITIDA PARA CARTEIRAS DE NOTAS DE SEGUROS – MOEDA VARIÁVEL",
67: "NOME INVÁLIDO DO SACADOR AVALISTA",
72: "ENDEREÇO INVÁLIDO – SACADOR AVALISTA",
73: "BAIRRO INVÁLIDO – SACADOR AVALISTA",
74: "CIDADE INVÁLIDA – SACADOR AVALISTA",
75: "SIGLA ESTADO INVÁLIDO – SACADOR AVALISTA",
76: "CEP INVÁLIDO – SACADOR AVALISTA",
81: "ALTERAÇÃO BLOQUEADA - TÍTULO COM NEGATIVAÇÃO EXPRESSA OU PROTESTO"}

# TABELA 3 – Instruções rejeitadas (código da ocorrência = 16 na posição 16 a 17)

table_3 = {
        1 : "INSTRUÇÃO/OCORRÊNCIA NÃO EXISTENTE",
        3 : "CONTA NÃO TEM PERMISSÃO PARA PROTESTAR (CONTATE SEU GERENTE)",
        6 : "NOSSO NÚMERO IGUAL A ZEROS",
        9 : "CNPJ/CPF DO SACADOR/AVALISTA INVÁLIDO",
        14 : "REGISTRO EM DUPLICIDADE",
        15 : "CNPJ/CPF INFORMADO SEM NOME DO SACADOR/AVALISTA",
        19 : "VALOR DO ABATIMENTO MAIOR QUE 90% DO VALOR DO TÍTULO",
        20 : "EXISTE SUSTACAO DE PROTESTO PENDENTE PARA O TITULO",
        21 : "TÍTULO NÃO REGISTRADO NO SISTEMA",
        22 : "TÍTULO BAIXADO OU LIQUIDADO",
        23 : "INSTRUÇÃO NÃO ACEITA",
        24 : "INSTRUÇÃO INCOMPATÍVEL - EXISTE INSTRUÇÃO DE PROTESTO PARA O TÍTULO",
        25 : "INSTRUÇÃO INCOMPATÍVEL - NÃO EXISTE INSTRUÇÃO DE PROTESTO PARA O TÍTULO",
        26 : "INSTRUÇÃO NÃO ACEITA POR JÁ TER SIDO EMITIDA A ORDEM DE PROTESTO AO CARTÓRIO",
        27 : "INSTRUÇÃO NÃO ACEITA POR NÃO TER SIDO EMITIDA A ORDEM DE PROTESTO AO CARTÓRIO",
        28 : "JÁ EXISTE UMA MESMA INSTRUÇÃO CADASTRADA ANTERIORMENTE PARA O TÍTULO",
        29 : "VALOR LÍQUIDO + VALOR DO ABATIMENTO DIFERENTE DO VALOR DO TÍTULO REGISTRADO",
        30 : "EXISTE UMA INSTRUÇÃO DE NÃO PROTESTAR ATIVA PARA O TÍTULO",
        31 : "EXISTE UMA OCORRÊNCIA DO PAGADOR QUE BLOQUEIA A INSTRUÇÃO",
        32 : "DEPOSITÁRIA DO TÍTULO = 9999 OU CARTEIRA NÃO ACEITA PROTESTO",
        33 : "ALTERAÇÃO DE VENCIMENTO IGUAL À REGISTRADA NO SISTEMA OU QUE TORNA O TÍTULO VENCIDO",
        34 : "INSTRUÇÃO DE EMISSÃO DE AVISO DE COBRANÇA PARA TÍTULO VENCIDO ANTES DO VENCIMENTO",
        35 : "SOLICITAÇÃO DE CANCELAMENTO DE INSTRUÇÃO INEXISTENTE",
        36 : "TÍTULO SOFRENDO ALTERAÇÃO DE CONTROLE (AGÊNCIA/CONTA/CARTEIRA/NOSSO NÚMERO)",
        37 : "INSTRUÇÃO NÃO PERMITIDA PARA A CARTEIRA",
        40 : "INSTRUÇÃO INCOMPATÍVEL – NÃO EXISTE INSTRUÇÃO DE NEGATIVAÇÃO EXPRESSA PARA O TÍTULO",
        41 : "INSTRUÇÃO NÃO PERMITIDA – TÍTULO JÁ ENVIADO PARA NEGATIVAÇÃO EXPRESSA",
        42 : "INSTRUÇÃO NÃO PERMITIDA – TÍTULO COM NEGATIVAÇÃO EXPRESSA CONCLUÍDA",
        43 : "PRAZO INVÁLIDO PARA NEGATIVAÇÃO – MÍNIMO: 02 DIAS CORRIDOS APÓS O VE",
        45 : "INSTRUÇÃO INCOMPATÍVEL PARA O MESMO TÍTULO NESTA DATA",
        47 : "INSTRUÇÃO NÃO PERMITIDA – ESPÉCIE INVÁLIDA",
        48 : "DADOS DO PAGADOR INVÁLIDOS (CPF / CNPJ / NOME)",
        49 : "DADOS DO ENDEREÇO DO PAGADOR INVÁLIDOS",
        50 : "DATA DE EMISSÃO DO TÍTULO INVÁLIDA",
        51 : "INSTRUÇÃO NÃO PERMITIDA – TÍTULO COM NEGATIVAÇÃO EXPRESSA AGENDADA"
        }

table_4 = {
    4: "NOSSO NÚMERO EM DUPLICIDADE NUM MESMO MOVIMENTO",
    5: "SOLICITAÇÃO DE BAIXA PARA TÍTULO JÁ BAIXADO OU LIQUIDADO",
    6: "SOLICITAÇÃO DE BAIXA PARA TÍTULO NÃO REGISTRADO NO SISTEMA",
    7: "COBRANÇA PRAZO CURTO - SOLICITAÇÃO DE BAIXA P/ TÍTULO NÃO REGISTRADO NO SISTEMA",
    8: "SOLICITAÇÃO DE BAIXA PARA TÍTULO EM FLOATING",
}

table_5 = {
    16: "ABATIMENTO/ALTERAÇÃO DO VALOR DO TÍTULO OU SOLICITAÇÃO DE BAIXA BLOQUEADOS",
    40: "NÃO APROVADA DEVIDO AO IMPACTO NA ELEGIBILIDADE DE GARANTIAS",
    41: "AUTOMATICAMENTE REJEITADA",
    42: "CONFIRMA RECEBIMENTO DE INSTRUÇÃO – PENDENTE DE ANÁLISE",
}